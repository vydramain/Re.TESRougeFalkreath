<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>
    ru:bearlibterminal:reference:input    [divergence]
  </title>

  <meta name="generator" content="DokuWiki">
<meta name="robots" content="index,follow">
<meta name="date" content="2016-09-07T03:10:58+0300">
<meta name="keywords" content="ru,bearlibterminal,reference,input">
<link rel="search" type="application/opensearchdescription+xml" href="http://foo.wyrd.name/lib/exe/opensearch.php" title="divergence">
<link rel="start" href="http://foo.wyrd.name/">
<link rel="contents" href="http://foo.wyrd.name/ru:bearlibterminal:reference:input?do=index" title="Sitemap">
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="http://foo.wyrd.name/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://foo.wyrd.name/feed.php?mode=list&amp;ns=ru:bearlibterminal:reference">
<link rel="alternate" type="text/html" title="Plain HTML" href="http://foo.wyrd.name/_export/xhtml/ru:bearlibterminal:reference:input">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="http://foo.wyrd.name/_export/raw/ru:bearlibterminal:reference:input">
<link rel="canonical" href="http://foo.wyrd.name/ru:bearlibterminal:reference:input">
<link rel="stylesheet" type="text/css" href="BearLibTerminal(%D0%92%D0%B2%D0%BE%D0%B4)_files/css.css">
<link rel="stylesheet" type="text/css" href="BearLibTerminal(%D0%92%D0%B2%D0%BE%D0%B4)_files/shCore.css">
<link rel="stylesheet" type="text/css" href="BearLibTerminal(%D0%92%D0%B2%D0%BE%D0%B4)_files/shThemeDefault.css">
<script type="text/javascript">/*<![CDATA[*/var NS='ru:bearlibterminal:reference';var JSINFO = {"id":"ru:bearlibterminal:reference:input","namespace":"ru:bearlibterminal:reference"};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="BearLibTerminal(%D0%92%D0%B2%D0%BE%D0%B4)_files/js.php"></script>
<script type="text/javascript" src="BearLibTerminal(%D0%92%D0%B2%D0%BE%D0%B4)_files/shCore.js"></script>
<script type="text/javascript" src="BearLibTerminal(%D0%92%D0%B2%D0%BE%D0%B4)_files/shAutoloader.js"></script>
<script type="text/javascript" src="BearLibTerminal(%D0%92%D0%B2%D0%BE%D0%B4)_files/shBrushXml.js"></script>
  <link rel="shortcut icon" href="http://foo.wyrd.name/lib/tpl/raw/images/favicon.ico">

  </head>

<body>
<div class="dokuwiki">

  
  <!--
  <h1><a href="/start"  name="dokuwiki__top" id="dokuwiki__top" accesskey="h" title="[H]">divergence</a></h1>
  -->

  <div class="navi">
      </div>
  
  <div class="plugin_translation"><ul><li><div class="li"><a href="http://foo.wyrd.name/en:bearlibterminal:reference:input" class="wikilink1" title="en">en</a></div></li><li><div class="li"><a href="http://foo.wyrd.name/ru:bearlibterminal:reference:input" class="wikilink1 cur" title="ru">ru</a></div></li></ul></div>
  <div class="stylehead">

    
    
    
  </div>
  
  
  <div class="page">
    <!-- wikipage start -->
    
<p>
</p><h2><a href="http://foo.wyrd.name/ru:bearlibterminal">BearLibTerminal</a> / <a href="http://foo.wyrd.name/ru:bearlibterminal:reference">API</a> / Ввод</h2>
<p></p>
<div class="level2">

</div>

<h3 id="функции">Функции</h3>
<div class="level3">

<p>
В BearLibTerminal ввод обрабатывается с помощью функций <a href="#read" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read</a>, <a href="#peek" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">peek</a>, <a href="#read_str" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read str</a>, <a href="#has_input" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">has input</a>, <a href="#state" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">state</a> и <a href="#check" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">check</a>.
</p>

</div>

<h4 id="read">read</h4>
<div class="level4">

<p>
Эта функция возвращает следующее событие из <a href="#очередь_ввода" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">очереди ввода</a>:
</p><div><div id="highlighter_179476" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">key = terminal_read();</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_ESCAPE)</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Quit</code></div><div class="line number6 index5 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

<p>
Если в очередь ввода пуста, вызов заблокирует выполнение до поступления 
нового события. Если такое блокируещее поведение нежелательно, можно 
проверить <a href="#has_input" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">has input</a> перед вызовом <strong>read</strong>.
</p>

</div>

<h4 id="peek">peek</h4>
<div class="level4">

<p>
Эта функция аналогична <a href="#read" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read</a>,
 но не убирает прочитанное событие из внутренней очереди (следующий 
вызов peek или read вернет то же значение). Кроме того, вызов этой 
функции является неблокирующим: если очередь ввода пуста, функция вернет
 0.
</p>

</div>

<h4 id="read_str">read_str</h4>
<div class="level4">

<p>
Эта функция выполняет простое блокирующее чтение строки без какого-либо 
разбора введенного значения. В процессе выполнения вызова, 
пользовательский ввод отображается по указанным координатам и 
ограничивается по размеру и может быть легко вписан в интерфейс игры. 
Функция отображает ввод в текущем выбранном слое и полностью 
восстанавливает исходное состояние сцены перед выходом, оставляя 
сохранение введенной строки на экране на усмотрение приложения.
</p>

<p>
Функция возвращает размер строки, введенной пользователем и 
подтвержденной нажатием на Enter, или константу TK_INPUT_CANCELLED, если
 ввод был отменен нажатием на Escape или вовсе попыткой закрытия окна.
</p>

<p>
</p><div><div id="highlighter_943508" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">wchar_t</code> <code class="cpp plain">s[32] = L</code><code class="cpp string">"Hello"</code><code class="cpp plain">;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(terminal_read_wstr(2, 1, s, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(s)-1) &gt;= 0)</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">terminal_wprintf(L</code><code class="cpp string">"You entered: \"%ls\""</code><code class="cpp plain">, s);</code></div><div class="line number6 index5 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

<p>
Если поведение <strong>read_str</strong> не удовлетворяет требованиям конкретного приложения, можно использовать состояния ввода <a href="#свойства_tk_char_tk_wchar" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">TK CHAR/TK WCHAR</a>, позволяющие реализовать произвольный ввод строки.
</p>

</div>

<h4 id="has_input">has_input</h4>
<div class="level4">

<p>
Эта функция возвращает булево значение, сигнализирующее наличие доступных событий ввода в очереди. Возврат <em>true</em> функцией <strong>has_input</strong> гарантирует, что следующий вызов <a href="#read" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read</a> вернет результат сразу же, не блокируя выполнение программы.
</p>

<p>
</p><div><div id="highlighter_278203" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">while</code> <code class="cpp plain">(terminal_has_input())</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">key = terminal_read();</code></div><div class="line number4 index3 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

</div>

<h4 id="state">state</h4>
<div class="level4">

<p>
Эта функция возвращает текущее численное значение некоторого свойства/состояния библиотеки. При обработке ввода с помощью <strong>state</strong> запрашиваются различные своства событий ввода, см. <a href="#константы_свойств_и_событий" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">таблицу</a> ниже.
</p>

<p>
</p><div><div id="highlighter_917311" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">key = terminal_read();</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_MOUSE_MOVE)</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">x = terminal_state(TK_MOUSE_X);</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">y = terminal_state(TK_MOUSE_Y);</code></div><div class="line number7 index6 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

<p>
Следует отметить, что <strong>state</strong>, в общем виде, возвращет 
значение свойства не на момент вызова, а на момент, когда случилось 
последнее выбранное из очереди событие ввода, см. <a href="#очередь_ввода" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">очередь ввода</a>.
</p>

</div>

<h4 id="check">check</h4>
<div class="level4">

<p>
Эта функция является простой оберткой над <a href="#state" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">state</a>.
 Во многих языках программирования нельзя сравнивать числовые и булевы 
значения, из-за чего проверка логически булевых состояний посредством 
постоянного приведения численного результата <a href="#state" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">state</a> к булевому типу может быстро надоесть. Вместо этого можно использовать <strong>check</strong> для проверки свойств:
</p>

<p>
</p><div><div id="highlighter_332911" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">key = terminal_read();</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_Z)</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(terminal_check(TK_SHIFT))</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// 'Z': использовать жезл</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// 'z': прочитать заклинание</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number13 index12 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

</div>

<h3 id="опции_ввода">Опции ввода</h3>
<div class="level3">

<p>
Опции ввода устанавливаются с помощью функции <a href="http://foo.wyrd.name/ru:bearlibterminal:reference:api:set" class="wikilink2" title="ru:bearlibterminal:reference:api:set" rel="nofollow">set</a>:
</p>

<p>
</p><div><div id="highlighter_857046" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">terminal_set</code></div><div class="line number2 index1 alt1"><code class="cpp plain">(</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp string">"input:"</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp string">"cursor-symbol = 0x1F,"</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp string">"cursor-blink-rate = 500,"</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp string">"precise-mouse = false,"</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp string">"mouse-cursor = true,"</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp string">"filter=[keyboard];"</code></div><div class="line number9 index8 alt2"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
<p></p>

</div>

<h4 id="inputcursor-symbol">input.cursor-symbol</h4>
<div class="level4">

<p>
Символ/тайл, используемый в качестве курсора функцией <a href="#read_str" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read str</a>.
 По умолчанию это “_” (символ подчеркивания) и может быть сменен, чтобы 
соответствовать интерфейсу приложения, например на сплошной 
прямоугольник или вертикальную черту.
</p>

</div>

<h4 id="inputcursor-blink-rate">input.cursor-blink-rate</h4>
<div class="level4">

<p>
Скорость, с которой мерцает курсор в функции <a href="#read_str" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read str</a>, в миллисекундах. По умолчанию 500, т. е. дважды в секунду.
</p>

</div>

<h4 id="inputprecise-mouse">input.precise-mouse</h4>
<div class="level4">

<p>
Булев флаг, контролирующий генерацию событий о движении курсора мыши. Если он <em>false</em>, событие генерируется только если курсор перемещается с одного знакоместа на другое. Если флаг <em>true</em>, любое перемещение курсора мыши генерирует событие. По умолчанию параметр выставлен в <em>false</em>.
</p>

</div>

<h4 id="inputmouse-cursor">input.mouse-cursor</h4>
<div class="level4">

<p>
Булев флаг, контролирующий видимость курсора мыши. По умолчанию <em>true</em>.
</p>

</div>

<h4 id="inputsticky-close">input.sticky-close</h4>
<div class="level4">

<p>
Булев флаг, контролирующий реакцию терминала на событие TK_CLOSE. Если он <em>true</em>, единожды сгенерированное событие TK_CLOSE не может быть сброшено, а все последующие вызовы <a href="#read" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read</a> будут возвращать TK_CLOSE. Обычно это несколько упрощает логику приложения. Когда параметр выставлен в <em>false</em>,
 событие TK_CLOSE имеет смысл запроса и приложение может его 
проигнорировать, например спросив подтверждение у пользователя. По 
умолчанию параметр выставлен в <em>true</em>.
</p>

</div>

<h4 id="inputfilter">input.filter</h4>
<div class="level4">

<p>
Список событий, в которых заинтересовано приложение, все остальные 
события будут обработаны библиотекой автоматически и не будут прочитаны 
приложением. Иными словами, <a href="#read" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read</a>
 будет возвращать события только из этого списка. Список задается в виде
 имен событий, перечисленных через запятую внутри квадратных скобок:
</p>
<pre class="code">input.filter = [keyboard, mouse+]</pre>

<p>
Именем события может быть:
</p>
<ul>
<li class="level1"><div class="li"> группа событий: keyboard (вся клавиатура), mouse (мышь), keypad (цифровой блок-нумпад), arrows (стрелки).</div>
</li>
<li class="level1"><div class="li"> имя одного события как указано в таблице ниже, но без префикса 'TK_'; регистр не имеет значения.</div>
</li>
<li class="level1"><div class="li"> краткое перечисление буквенно-цифровых событий, например “abc” или “12345”.</div>
</li>
</ul>

<p>
Указание имени события или группы событий “включает” их чтение посредством функции <a href="#read" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read</a>. Если к имени добавлен знак ”+”, то будут докладываться как нажатия клавиши, так и отпускания.
</p>

<p>
Фильтр по умолчанию – '​keyboard'​. Для того, чтобы задействовать мышь, 
нужно установить фильтр в '​keyboard,​ mouse'​. “Системные” события 
TK_CLOSE и TK_RESIZED задействованы всегда.
</p>

<p>
Если список пуст, фильтрация не производится. Для того, чтобы выключить 
фильтрацию, достаточно установить пустой список в качестве значения <em>input.filter</em>.
</p>

</div>

<h3 id="константы_свойств_и_событий">Константы свойств и событий</h3>
<div class="level3">
<div class="table sectionedit1"><table class="inline">
<colgroup><col><col><col><col style="width: 65%">
	</colgroup><tbody><tr class="row0">
		<th class="col0">Группа </th><th class="col1" colspan="2">Константа </th><th class="col3">Описание </th>
	</tr>
	<tr class="row1">
		<td class="col0" rowspan="14">Буквенно-цифровые </td><td class="col1" colspan="2">TK_A … TK_Z </td><td class="col3" rowspan="44"><strong>Событие</strong>:
 сигнализирует о том, что соответствующая клавиша была нажата или 
отпущена. Если клавиша была отпущена, то ее коду будет добавлена 
констатна TK_KEY_RELEASED (<a href="#флаг_tk_key_released" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">еще...</a>).<br>
<br>
<strong>Свойство</strong>: текущее состояние клавиши (см. <a href="#очередь_ввода" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">очередь ввода</a>). </td>
	</tr>
	<tr class="row2">
		<td class="col0" colspan="2">TK_0 … TK_9 </td>
	</tr>
	<tr class="row3">
		<td class="col0" colspan="2">TK_SPACE </td>
	</tr>
	<tr class="row4">
		<td class="col0">TK_MINUS </td><td class="col1 centeralign">  <code>-</code>  </td>
	</tr>
	<tr class="row5">
		<td class="col0">TK_EQUALS </td><td class="col1 centeralign">  <code>=</code>  </td>
	</tr>
	<tr class="row6">
		<td class="col0">TK_LBRACKET </td><td class="col1 centeralign">  <code>[</code>  </td>
	</tr>
	<tr class="row7">
		<td class="col0">TK_RBRACKET </td><td class="col1 centeralign">  <code>]</code>  </td>
	</tr>
	<tr class="row8">
		<td class="col0">TK_BACKSLASH </td><td class="col1 centeralign">  <code>\</code>  </td>
	</tr>
	<tr class="row9">
		<td class="col0">TK_SEMICOLON </td><td class="col1 centeralign">  <code>;</code>  </td>
	</tr>
	<tr class="row10">
		<td class="col0">TK_APOSTROPHE </td><td class="col1 centeralign">  <code></code>'  </td>
	</tr>
	<tr class="row11">
		<td class="col0">TK_GRAVE </td><td class="col1 centeralign">  <code>`</code>  </td>
	</tr>
	<tr class="row12">
		<td class="col0">TK_COMMA </td><td class="col1 centeralign">  <code>,</code>  </td>
	</tr>
	<tr class="row13">
		<td class="col0">TK_PERIOD </td><td class="col1 centeralign">  <code>.</code>  </td>
	</tr>
	<tr class="row14">
		<td class="col0">TK_SLASH </td><td class="col1 centeralign">  <code>/</code>  </td>
	</tr>
	<tr class="row15">
		<td class="col0" rowspan="18">Функциональные,<br>
навигационные,<br>
регистровые </td><td class="col1" colspan="2">TK_F1 … TK_F12 </td>
	</tr>
	<tr class="row16">
		<td class="col0" colspan="2">TK_RETURN </td>
	</tr>
	<tr class="row17">
		<td class="col0" colspan="2">TK_ESCAPE </td>
	</tr>
	<tr class="row18">
		<td class="col0" colspan="2">TK_BACKSPACE </td>
	</tr>
	<tr class="row19">
		<td class="col0" colspan="2">TK_TAB </td>
	</tr>
	<tr class="row20">
		<td class="col0" colspan="2">TK_PAUSE </td>
	</tr>
	<tr class="row21">
		<td class="col0" colspan="2">TK_INSERT </td>
	</tr>
	<tr class="row22">
		<td class="col0" colspan="2">TK_HOME </td>
	</tr>
	<tr class="row23">
		<td class="col0" colspan="2">TK_PAGEUP </td>
	</tr>
	<tr class="row24">
		<td class="col0" colspan="2">TK_DELETE </td>
	</tr>
	<tr class="row25">
		<td class="col0" colspan="2">TK_END </td>
	</tr>
	<tr class="row26">
		<td class="col0" colspan="2">TK_PAGEDOWN </td>
	</tr>
	<tr class="row27">
		<td class="col0" colspan="2">TK_RIGHT </td>
	</tr>
	<tr class="row28">
		<td class="col0" colspan="2">TK_LEFT </td>
	</tr>
	<tr class="row29">
		<td class="col0" colspan="2">TK_DOWN </td>
	</tr>
	<tr class="row30">
		<td class="col0" colspan="2">TK_UP </td>
	</tr>
	<tr class="row31">
		<td class="col0" colspan="2">TK_SHIFT </td>
	</tr>
	<tr class="row32">
		<td class="col0" colspan="2">TK_CONTROL </td>
	</tr>
	<tr class="row33">
		<td class="col0" rowspan="7">Нумпад </td><td class="col1" colspan="2">TK_KP_0 … TK_KP_9 </td>
	</tr>
	<tr class="row34">
		<td class="col0">TK_KP_DIVIDE </td><td class="col1 centeralign">  <code>/</code>  </td>
	</tr>
	<tr class="row35">
		<td class="col0">TK_KP_MULTIPLY </td><td class="col1 centeralign">  <code>*</code>  </td>
	</tr>
	<tr class="row36">
		<td class="col0">TK_KP_MINUS </td><td class="col1 centeralign">  <code>-</code>  </td>
	</tr>
	<tr class="row37">
		<td class="col0">TK_KP_PLUS </td><td class="col1 centeralign">  <code>+</code>  </td>
	</tr>
	<tr class="row38">
		<td class="col0">TK_KP_PERIOD </td><td class="col1 centeralign">  <code>.</code>  </td>
	</tr>
	<tr class="row39">
		<td class="col0" colspan="2">TK_KP_ENTER </td>
	</tr>
	<tr class="row40">
		<td class="col0" rowspan="14">Мышь </td><td class="col1" colspan="2">TK_MOUSE_LEFT </td>
	</tr>
	<tr class="row41">
		<td class="col0" colspan="2">TK_MOUSE_RIGHT </td>
	</tr>
	<tr class="row42">
		<td class="col0" colspan="2">TK_MOUSE_MIDDLE </td>
	</tr>
	<tr class="row43">
		<td class="col0" colspan="2">TK_MOUSE_X1 </td>
	</tr>
	<tr class="row44">
		<td class="col0" colspan="2">TK_MOUSE_X2 </td>
	</tr>
	<tr class="row45">
		<td class="col0" colspan="2">TK_MOUSE_MOVE </td><td class="col2"><strong>Событие</strong>:
 генерируется, когда курсор мыши перемещается с одного знакоместа на 
другое (иными словами, с точностью “до знакоместа”). Если включена опция
 <a href="#input_precise_mouse" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">input.precise-mouse</a>, событие генерируется при любом движении курсора мыши. </td>
	</tr>
	<tr class="row46">
		<td class="col0" colspan="2">TK_MOUSE_SCROLL </td><td class="col2"><strong>Событие</strong>: генерируется при повороте колесика мыши. </td>
	</tr>
	<tr class="row47">
		<td class="col0" colspan="2">TK_MOUSE_WHEEL </td><td class="col2"><strong>Свойство</strong>: возвращает дельту поворота колесика мыши последнего события TK_MOUSE_SCROLL (<a href="#свойство_tk_mouse_wheel" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">еще...</a>). </td>
	</tr>
	<tr class="row48">
		<td class="col0" colspan="2">TK_MOUSE_X </td><td class="col2" rowspan="2"><strong>Свойство</strong>: положение курсора мыши, в знакоместах. </td>
	</tr>
	<tr class="row49">
		<td class="col0" colspan="2">TK_MOUSE_Y </td>
	</tr>
	<tr class="row50">
		<td class="col0" colspan="2">TK_MOUSE_PIXEL_X </td><td class="col2" rowspan="3"><strong>Свойство</strong>: положение курсора мыши, в пикселях. Эти свойства доступны вне зависимости от опции <a href="#input_precise_mouse" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">input.precise-mouse</a>. </td>
	</tr>
	<tr class="row51">
		<td class="col0" colspan="2" rowspan="2">TK_MOUSE_PIXEL_Y </td>
	</tr>
	<tr class="row52">
		
	</tr>
	<tr class="row53">
		<td class="col0" colspan="2">TK_MOUSE_CLICKS </td><td class="col2"><strong>Свойство</strong>:
 количество быстрых последовательных щелчков на момент последнего 
события нажатия кнопки мыши, например 1 для обычного щелчка, 2 для 
двойного и т. д. (<a href="#свойство_tk_mouse_clicks" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">еще...</a>) </td>
	</tr>
	<tr class="row54">
		<td class="col0" rowspan="12">Другие свойства </td><td class="col1" colspan="2">TK_WIDTH </td><td class="col3" rowspan="2"><strong>Свойство</strong>: размер терминала в знакоместах. </td>
	</tr>
	<tr class="row55">
		<td class="col0" colspan="2">TK_HEIGHT </td>
	</tr>
	<tr class="row56">
		<td class="col0" colspan="2">TK_CELL_WIDTH </td><td class="col2" rowspan="2"><strong>Свойство</strong>: размер знакоместа в пикселях. </td>
	</tr>
	<tr class="row57">
		<td class="col0" colspan="2">TK_CELL_HEIGHT </td>
	</tr>
	<tr class="row58">
		<td class="col0" colspan="2">TK_COLOR </td><td class="col2"><strong>Свойство</strong>: текущий <a href="http://foo.wyrd.name/ru:bearlibterminal:reference#color" class="wikilink1" title="ru:bearlibterminal:reference">цвет переднего плана</a>. </td>
	</tr>
	<tr class="row59">
		<td class="col0" colspan="2">TK_BKCOLOR </td><td class="col2"><strong>Свойство</strong>: текущий <a href="http://foo.wyrd.name/ru:bearlibterminal:reference#bkcolor" class="wikilink1" title="ru:bearlibterminal:reference">цвет фона</a>. </td>
	</tr>
	<tr class="row60">
		<td class="col0" colspan="2">TK_LAYER </td><td class="col2"><strong>Свойство</strong>: текущий <a href="http://foo.wyrd.name/ru:bearlibterminal:reference#layer" class="wikilink1" title="ru:bearlibterminal:reference">номер слоя</a>. </td>
	</tr>
	<tr class="row61">
		<td class="col0" colspan="2">TK_COMPOSITION </td><td class="col2"><strong>Свойство</strong>: текущий <a href="http://foo.wyrd.name/ru:bearlibterminal:reference#composition" class="wikilink1" title="ru:bearlibterminal:reference">флаг композиции</a>. </td>
	</tr>
	<tr class="row62">
		<td class="col0" colspan="2">TK_CHAR </td><td class="col2" rowspan="2"><strong>Свойство</strong>: Unicode или ANSI код символа, ассоциированного с последним прочитанным событием ввода (<a href="#свойства_tk_char_tk_wchar" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">еще...</a>). </td>
	</tr>
	<tr class="row63">
		<td class="col0" colspan="2">TK_WCHAR </td>
	</tr>
	<tr class="row64">
		<td class="col0" colspan="2">TK_EVENT </td><td class="col2"><strong>Свойство</strong>: код последнего прочитанного события ввода. </td>
	</tr>
	<tr class="row65">
		<td class="col0" colspan="2">TK_FULLSCREEN </td><td class="col2"><strong>Свойство</strong>: флаг активности полноэкранного режима. </td>
	</tr>
	<tr class="row66">
		<td class="col0" rowspan="2">Другие события </td><td class="col1" colspan="2">TK_CLOSE </td><td class="col3"><strong>Событие</strong>:
 запрос на закрытие терминала, генерируемый когда пользователь пытается 
закрыть окно, например щелкнув по кнопке закрытия или нажав Alt+F4 (см. 
опцию <a href="#input_sticky_close" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">input.sticky-close</a>). </td>
	</tr>
	<tr class="row67">
		<td class="col0" colspan="2">TK_RESIZED </td><td class="col2"><strong>Событие</strong>: размер окна был изменен пользователем (см. опцию <a href="http://foo.wyrd.name/ru:bearlibterminal:reference:options#window_resizeable" class="wikilink2" title="ru:bearlibterminal:reference:options" rel="nofollow">window.resizeable</a>). </td>
	</tr>
</tbody></table></div>

</div>

<h3 id="очередь_ввода">Очередь ввода</h3>
<div class="level3">

<p>
Все генерируемые события ввода попадают во внутреннюю очередь. Чтение этой очереди производится с помощью функции <a href="#read" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read</a>,
 причем до тех пор, пока событие не будет выбрано из очереди, оно не 
окажет никакого воздействия на приведенные выше свойства. У такого 
механизма есть весьма важное последствие: все связанные со вводом 
свойства всегда находятся в согласованном состоянии.
</p>

<p>
Например, пусть пользователь нажал A, а затем Shift+B. Будут сгенерированы следующие события: <span style="display:inline; border: 1px solid black;">A⇩</span> <span style="display:inline; border: 1px solid black;">A⇧</span> <span style="display:inline; border: 1px solid black;">Shift⇩</span> <span style="display:inline; border: 1px solid black;">B⇩</span> <span style="display:inline; border: 1px solid black;">Shift⇧</span> <span style="display:inline; border: 1px solid black;">B⇧</span>.
 Когда приложение в процессе чтения очереди ввода наткнется на некоторое
 событие нажатия клавиши, можно будет проверить была ли нажата одна 
клавиша или целая комбинация простым вызовом функции <a href="#check" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">check</a>:
</p>

<p>
</p><div><div id="highlighter_429996" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_A &amp;&amp; terminal_check(TK_SHIFT))</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Do something</code></div><div class="line number4 index3 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

<p>
Для события <span style="display:inline; border: 1px solid black;">A⇩</span> это условие будет ложным. Для <span style="display:inline; border: 1px solid black;">B⇩</span> ситуация отличается тем, что к тому моменту событие <span style="display:inline; border: 1px solid black;">Shift⇩</span> уже будет выбрано и применено и <a href="#check" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">check</a> вернет <em>true</em>.
</p>

<p>
Во многих библиотеках проблема проверки нажатия комбинации клавиш 
решается введением целой структуры события с кодом нажатой клавиши и 
набором флагов состояния клавиш Shift, Ctrl, клавиш мыши и т. д. 
BearLibTerminal подходит к этой проблеме несколько по-иному: все 
связанные со вводом свойства ведут себя как одна большая структура, 
описывающая произошедшее событие ввода:
</p>

<p>
</p><div><div id="highlighter_842552" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_F &amp;&amp; terminal_check(TK_SHIFT))</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Shift+F: поиск, а не выстрел.</code></div><div class="line number4 index3 alt1"><code class="cpp plain">}</code></div><div class="line number5 index4 alt2"><code class="cpp keyword bold">else</code> <code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_MOUSE_LEFT &amp;&amp; terminal_check(TK_CONTROL))</code></div><div class="line number6 index5 alt1"><code class="cpp plain">{</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Ctrl+LMB: команда, а не выбор</code></div><div class="line number8 index7 alt1"><code class="cpp plain">}</code></div><div class="line number9 index8 alt2"><code class="cpp keyword bold">else</code> <code class="cpp keyword bold">if</code> <code class="cpp plain">(terminal_state(TK_CHAR) == </code><code class="cpp string">'?'</code> <code class="cpp plain">&amp;&amp; terminal_state(TK_MOUSE_Y) &lt; 20)</code></div><div class="line number10 index9 alt1"><code class="cpp plain">{</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Нажатие '?' в то время как курсор мыши находится выше 20-й строки: что бы это ни было</code></div><div class="line number12 index11 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

<p>
Следует отметить, что ряд свойств терминала не зависят от очереди и 
всегда возвращают актуальное состояние, потому что иначе они имели бы 
мало смысла. Этими свойствами являются: TK_WIDTH, TK_HEIGHT, 
TK_CELL_WIDTH, TK_CELL_HEIGHT, TK_COLOR, TK_BKCOLOR, TK_LAYER, 
TK_COMPOSITION, TK_FULLSCREEN.
</p>

</div>

<h3 id="флаг_tk_key_released">Флаг TK_KEY_RELEASED</h3>
<div class="level3">

<p>
Эта константа используется для различения нажатия и отпуска клавиши. Для события нажатия клавиши или автоповтора, функци <a href="#read" title="ru:bearlibterminal:reference:input ↵" class="wikilink1">read</a>
 вернет просто соответствующий код клавиши, например TK_A или 
TK_BACKSPACE. Для отпущенной же клавиши будет сгенерировано событие с 
кодом, составленным из кода клавиши и констатнты TK_KEY_RELEASED. Это 
позволяет легко фильровать события ввода, так как события нажатия и 
отпуска клавиши имеют различные коды, но при этим могут быть легко 
сопоставлены:
</p>

<p>
</p><div><div id="highlighter_163632" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">key = terminal_read();</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_A)</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Нажато 'A'</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">foo();</code></div><div class="line number7 index6 alt2"><code class="cpp plain">}</code></div><div class="line number8 index7 alt1"><code class="cpp keyword bold">else</code> <code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_B|TK_KEY_RELEASED)</code></div><div class="line number9 index8 alt2"><code class="cpp plain">{</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Отпущена 'B'</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">bar();</code></div><div class="line number12 index11 alt1"><code class="cpp plain">}</code></div><div class="line number13 index12 alt2"><code class="cpp keyword bold">else</code> <code class="cpp keyword bold">if</code> <code class="cpp plain">((key &amp; ~TK_KEY_RELEASED) == TK_C)</code></div><div class="line number14 index13 alt1"><code class="cpp plain">{</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Клавиша 'C' либо нажата, либо отпущена</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">baz();</code></div><div class="line number17 index16 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

<p>
Автоповтор зажатой клавиши генерирует только события нажатия, без 
промежуточных события отпуска клавиши. Таким образом, одному событию 
отпуска клавиши может соотвествовать несколько событий нажатия.
</p>

</div>

<h3 id="свойства_tk_char_tk_wchar">Свойства TK_CHAR/TK_WCHAR</h3>
<div class="level3">

<p>
Эти свойства предоставляют способ организации собственного ввода текста.
 Они возвращают код символа, ассоциированного с последним прочитанным 
событием ввода. TK_WCHAR возвращает код символа в Unicode, тогда как 
TK_CHAR – код <a href="http://en.wikipedia.org/wiki/ANSI_character_set" class="urlextern" title="http://en.wikipedia.org/wiki/ANSI_character_set" rel="nofollow">ANSI</a>, транслированный в соответствии с опцией <a href="http://foo.wyrd.name/ru:bearlibterminal:reference:options#terminal_encoding" class="wikilink2" title="ru:bearlibterminal:reference:options" rel="nofollow">terminal.encoding</a>.
</p>

<p>
</p><div><div id="highlighter_170169" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">std::wstring my_read_str(</code><code class="cpp color1 bold">int</code> <code class="cpp plain">x, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">y, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">max)</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">std::wstring s;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code> <code class="cpp plain">(</code><code class="cpp keyword bold">true</code><code class="cpp plain">)</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">key = terminal_read();</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_RETURN || key == TK_ESCAPE || key == TK_CLOSE)</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Не делаем различия между подтвеждением и отменой ввода</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code> <code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_BACKSPACE &amp;&amp; s.length() &gt; 0)</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Удаляем один символ с конца</code></div><div class="line number17 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">s.resize(s.length()-1);</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number19 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code> <code class="cpp keyword bold">if</code> <code class="cpp plain">(terminal_check(TK_WCHAR) &amp;&amp; s.length() &lt; max)</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number21 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Добавляем символ в конец</code></div><div class="line number22 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">s += (</code><code class="cpp color1 bold">wchar_t</code><code class="cpp plain">)terminal_state(TK_WCHAR);</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number24 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number25 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Визуализация ввода</code></div><div class="line number26 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">terminal_wprintf(x, y, L</code><code class="cpp string">"%-*ls_"</code><code class="cpp plain">, max, s.c_str());</code></div><div class="line number27 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number28 index27 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number29 index28 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">s;</code></div><div class="line number30 index29 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

</div>

<h3 id="свойство_tk_mouse_wheel">Свойство TK_MOUSE_WHEEL</h3>
<div class="level3">

<p>
Это свойство возвращает направление и дельту поворота колесика мыши последнего события TK_MOUSE_SCROLL, например 1 или -2:
</p>

<p>
</p><div><div id="highlighter_365381" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">key = terminal_read();</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_MOUSE_SCROLL)</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">amount = terminal_state(TK_MOUSE_WHEEL);</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(mouseOverFoo)</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">fooValue += amount;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code> <code class="cpp keyword bold">if</code> <code class="cpp plain">(mouseOverBar)</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">barValue += amount;</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number15 index14 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

</div>

<h3 id="свойство_tk_mouse_clicks">Свойство TK_MOUSE_CLICKS</h3>
<div class="level3">

<p>
Это свойство возвращает количество быстрых последовательных щелчков кнопкой мыши для последнего события нажатия клавиши мыши:
</p>

<p>
</p><div><div id="highlighter_527831" class="syntaxhighlighter nogutter  cpp"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">key = terminal_read();</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">(key == TK_MOUSE_LEFT)</code></div><div class="line number4 index3 alt1"><code class="cpp plain">{</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">clicks = terminal_state(TK_MOUSE_CLICKS);</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">(clicks == 1)</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Выбрать объект под курсором мыши</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code> <code class="cpp keyword bold">if</code> <code class="cpp plain">(clicks == 2)</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Выполнить какое-либо действие с выделенным объектом.</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number15 index14 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
<p></p>

</div>

<script type="text/javascript">
  SyntaxHighlighter.autoloader(
    'applescript /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushAppleScript.js',
    'actionscript3 as3 /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushAS3.js',
    'bash shell /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushBash.js',
    'coldfusion cf /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushColdFusion.js',
    'cpp c /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushCpp.js',
    'c# c-sharp csharp /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushCSharp.js',
    'css /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushCss.js',
    'delphi pascal /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushDelphi.js',
    'diff patch pas /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushDiff.js',
    'erl erlang /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushErlang.js',
    'groovy /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushGroovy.js',
    'java /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushJava.js',
    'jfx javafx /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushJavaFX.js',
    'js jscript javascript /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushJScript.js',
    'lua /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushLua.js',
    'perl pl /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPerl.js',
    'php /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPhp.js',
    'text plain /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPlain.js',
    'ps powershell /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPowerShell.js',
    'py python /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushPython.js',
    'ruby rails ror rb /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushRuby.js',
    'sass scss /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushSass.js',
    'scala /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushScala.js',
    'sql /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushSql.js',
    'vb vbnet /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushVb.js',
    'xml xhtml xslt html /lib/plugins/syntaxhighlighter3/sxh3/scripts/shBrushXml.js'
  );
  SyntaxHighlighter.all();
</script>

    <!-- wikipage stop -->
  </div>

  <div class="clearer"></div>

  
  <div class="stylefoot">

    
    <div class="bar" id="bar__bottom">
        <form class="button btn_source" method="post" action="/ru:bearlibterminal:reference:input"><div class="no"><input type="hidden" name="do" value="edit"><input type="hidden" name="rev" value="0"><input type="submit" value="Show pagesource" class="button" accesskey="v" title="Show pagesource [V]"></div></form>        <form class="button btn_revs" method="get" action="/ru:bearlibterminal:reference:input"><div class="no"><input type="hidden" name="do" value="revisions"><input type="submit" value="Old revisions" class="button" accesskey="o" title="Old revisions [O]"></div></form>                        <form class="button btn_media" method="get" action="/ru:bearlibterminal:reference:input"><div class="no"><input type="hidden" name="do" value="media"><input type="hidden" name="ns" value="ru:bearlibterminal:reference"><input type="submit" value="Media Manager" class="button" title="Media Manager"></div></form>                        <form class="button btn_login" method="get" action="/ru:bearlibterminal:reference:input"><div class="no"><input type="hidden" name="do" value="login"><input type="hidden" name="sectok" value="ed64ffb76967d3127f157e140a699c46"><input type="submit" value="Login" class="button" title="Login"></div></form>        <form class="button btn_index" method="get" action="/ru:bearlibterminal:reference:input"><div class="no"><input type="hidden" name="do" value="index"><input type="submit" value="Sitemap" class="button" accesskey="x" title="Sitemap [X]"></div></form>        <a class="nolink" href="#dokuwiki__top"><input type="button" class="button" value="Back to top" onclick="window.scrollTo(0, 0)" title="Back to top"></a>&nbsp;
    </div>

  </div>

  
</div>

<div class="no"><img src="BearLibTerminal(%D0%92%D0%B2%D0%BE%D0%B4)_files/indexer.gif" alt="" width="2" height="1"></div>


</body></html>